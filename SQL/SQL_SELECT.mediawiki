<span id="select_teoria"></span>
= SELECT_TEORIA =

<pre class="language-sql"># seleziona colonne dalla tabella

SELECT colonna1, colonna2, ...
FROM nome_tabella;
Copy</pre>
e' la sintassi del <code>SELECT</code> in sql.<br />
Serve a estrapolare dati dal db che rispettano una condizione precisata.<br />
Ma dove si trovano i criteri? Infatti nell'esempio sopra non ci sono, eccoli qui in basso:

<pre class="language-sql"># seleziona colonne dalla tabella rispettanti condizione

SELECT colonna1, colonna2, ...
FROM nome_tabella
WHERE condizioni;
Copy</pre>
le <code>condizioni</code> sono specificate dalla ''clausola'' <code>WHERE</code>.<br />
Li dentro mettiamo tutto quello che ci interessa per estrarre i dati che ci interessano.

<ul>
<li><p>Esiste un modo per il <code>SELECT</code> d'indicare <u>tutte le colonne</u> della tabella:</p>
<blockquote><p><code>*</code> indica tutte le colonne della tabella riferita</p></blockquote>
<pre>SELECT * FROM tabella;
Copy</pre></li>
<li><p>Esiste un modo per il <code>SELECT</code> d'indicare solo <u>distinti</u> elementi della tabella:</p>
<blockquote><p><code>DISTINCT</code> serve per precisare solo elementi distinti della colonna riferita</p></blockquote>
<pre>SELECT DISTINCT colonna FROM tabella;
Copy</pre></li>
<li><p>Esistono ''funzioni'' per il <code>SELECT</code>:<br />
- <code>MIN()</code> ritorna il <u>valore piu' piccolo</u> delle colonne selezionate;<br />
- <code>MAX()</code> ritorna il <u>valore piu' grande</u> delle colonne selezionate;<br />
- <code>AVG()</code> ritorna il <u>valore medio</u> di una colonna numerica;<br />
- <code>COUNT()</code> ritorna il <u>numero di righe</u> che rispettano un criterio;<br />
- <code>SUM()</code> ritorna la <u>somma dei valori</u> in una colonna numerica.</p>
<blockquote><p>funzioni argomento del SELECT</p></blockquote>
<pre>   SELECT MIN / MAX / AVG / COUNT / SUM (nome_colonna)
   FROM nome_tabella
   WHERE condizione;
Copy</pre></li>
<li><p>Una colonna o tabella, puo' essere rinominata con la ''parola chiave''.</p>
<blockquote><p><code>AS</code> per rinominare colonna o tabella o risultato funzione</p></blockquote>
<pre>SELECT nome_colonna AS variabile
FROM tabella;
Copy</pre></li></ul>

''Operatori'' della clausola <code>WHERE</code> sono:

{|
! operatore
! descrizione
|-
| =
| uguale
|-
| &gt;
| maggiore di
|-
| &lt;
| minore di
|-
| &gt;=
| maggiore di o uguale
|-
| &lt;=
| minore di o uguale
|-
| !=
| non uguale
|-
| BETWEEN
| tra un certo range
|-
| LIKE
| cerca per un pattern
|-
| IN
| specifica multipli valori possibili
|}

<span id="select_esempi"></span>
= SELECT_ESEMPI =

Immaginiamo di avere un db con al suo interno una tabella chiamata <code>Clienti</code>. Al suo interno ci sono 7 colonne e una di queste si chiama <code>paese</code>. Ora, immaginiamo di:

<code>estrarre tutte le info dei clienti italiani</code>

<pre class="language-sql">SELECT * FROM Clienti
WHERE paese='Italia';
Copy</pre>
{|
! ID
! nome
! contatto
! indirizzo
! citta'
! cap
! paese
|-
| 27
| franchi s.p.a.
| Paolo Accorti
| Via Monte 34
| Torino
| 10100
| Italia
|-
| 49
| magazzini alimentari riuniti
| Giovanni Rovelli
| Via Ludovico il Moro 22
| Bergamo
| 24100
| Italia
|-
| 66
| Reggiani Caseifici
| Maurizio Moroni
| Strada Provinciale 124
| Reggio Emilia
| 42100
| Italia
|}

Il simbolo <code>*</code> serve a indicare <u>tutte le colonne</u> della tabella.<br />
Stiamo scrivendo una query che:

* ''seleziona'' (<code>SELECT</code>) '''tutte''' (<code>*</code>) le colonne
* ''dalla'' (<code>FROM</code>) tabella <code>Clienti</code>
* ''dove'' (<code>WHERE</code>) la condizione <code>paese='Italia'</code> viene rispettata


-----

Immaginiamo ora di voler estrarre, sempre all'interno della stessa tabella <code>Clienti</code>, tutti i paesi che ne fanno parte.<br />
Per farlo ci serve un modo per fare distinzione tra duplicati (non vogliamo imbrogliare contando 2/3/4 volte il paese <code>Italia</code>).

<code>contiamo il numero di paesi nella tabella</code>

<pre class="language-sql">SELECT DISTINCT paese
FROM Clienti;
Copy</pre>
{|
! paese
! /
|-
| argentina
| /
|-
| belgio
| /
|-
| brazile
| /
|-
| canada
| /
|-
| danimarca
| /
|-
| finlandia
| /
|-
| italia
| /
|-
| ...
| /
|}

Lo statement <code>SELECT DISTINCT</code> serve a estrarre soltanto i valori <u>non duplicati</u>:

* ''seleziona'' (<code>SELECT</code>) '''valori distinti''' (<code>DISTINCT</code>) della colonna <code>paese</code>
* ''dalla'' (<code>FROM</code>) tabella <code>Clienti</code>


-----

Abbiamo una lista di <code>paesi</code>, vorremmo ora contarla.<br />
Gia' che ci siamo diamo un nome a quello che otteniamo.<br />
Facciamo uso della funzione <code>COUNT()</code> e di <code>AS</code>.

<pre class="language-sql">SELECT COUNT(DISTINCT paese) AS numeroPaesi
FROM Clienti;
Copy</pre>
{|
! numeroPaesi
! /
|-
| 21
| /
|}

Lo statement <code>SELECT COUNT(DISTINCT paese)</code>:

* ''seleziona'' (<code>SELECT</code>) la '''conta''' (<code>COUNT</code>) delle istanze <code>paese</code> '''distinte''' (<code>DISTINCT</code>) '''come''' nuova variabile <code>numeroPaesi</code>
* ''dalla'' (<code>FROM</code>) tabella <code>Clienti</code>
